<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GainGrid ‚Äî Earn Daily Rewards</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Security & Telegram Recognition -->
  <meta name="telegram:bot" content="@GainGridBot">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <!-- AdSense (kept async) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" crossorigin="anonymous"></script>

  <!-- SEO & AdSense-friendly meta -->
  <link rel="canonical" href="https://swanybz.github.io/" />
  <meta name="description" content="GainGrid ‚Äî Watch verified ads, complete simple tasks and earn G-Coins. Telegram-integrated rewards with secure verification and fast payouts." />
  <meta name="robots" content="index, follow" />
  <meta name="theme-color" content="#0f1419" />

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"GainGrid",
    "url":"https://swanybz.github.io",
    "description":"Watch verified ads, complete tasks and earn G-Coins."
  }
  </script>

  <!-- Optional SDKs (kept) -->
  <script src="/_sdk/element_sdk.js" defer></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript" defer></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript" defer></script>

  <style>
    :root{
      --gg-grad-start:#9b5de5; /* purple */
      --gg-grad-mid:#f15bb5;   /* pink */
      --gg-grad-end:#ff6f61;   /* red */
      --bg-dark:#0f1419;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:#fff;
      background: linear-gradient(135deg,var(--bg-dark) 0,#121623 50%,var(--bg-dark) 100%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }
    a{color:inherit}
    /* Header */
    .header{ position:fixed; top:0; left:0; right:0; z-index:1400; background:rgba(7,9,11,0.88); backdrop-filter:blur(8px); border-bottom:1px solid rgba(255,255,255,0.04); padding:10px 16px;}
    .nav{ max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px;}
    .logo-wrap{ display:flex; align-items:center; gap:12px; }
    .logo-img{ width:40px; height:40px; display:block; border-radius:8px; object-fit:cover; background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); }
    .logo-text{ font-weight:900; font-size:18px; letter-spacing:0.3px; background:linear-gradient(90deg,var(--gg-grad-start) 0%,var(--gg-grad-mid)45%,var(--gg-grad-end)100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .nav-links{ display:flex; gap:14px; align-items:center;}
    .nav-link{ color:rgba(255,255,255,0.9); text-decoration:none; font-weight:700; font-size:14px; padding:8px; border-radius:8px; transition:all .18s;}
    .nav-link:hover{ background:rgba(255,255,255,0.02)}
    .nav-cta{ padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:900; font-size:14px; background:linear-gradient(90deg,var(--gg-grad-mid),var(--gg-grad-end)); color:#fff; box-shadow:0 12px 36px rgba(155,93,229,0.12); }
    /* slide dropdown small card */
    .menu-btn{ width:40px; height:40px; display:inline-grid; place-items:center; border-radius:8px; background:rgba(255,255,255,0.02); cursor:pointer; border:1px solid rgba(255,255,255,0.03); }
    .slide-card{ position:absolute; top:68px; right:16px; width:220px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:10px; box-shadow:0 10px 30px rgba(0,0,0,0.6); display:none; z-index:1600; border:1px solid rgba(255,255,255,0.04); }
    .slide-card a{ display:block; padding:8px 10px; color:rgba(255,255,255,0.9); text-decoration:none; font-weight:700; border-radius:8px; }
    .slide-card a:hover{ background:rgba(255,255,255,0.02) }
    /* particles */
    .bg-particles{ position:fixed; inset:0; z-index:1; pointer-events:none; }
    .particle{ position:absolute; width:6px; height:6px; border-radius:50%; background:linear-gradient(45deg,var(--gg-grad-start),var(--gg-grad-mid)); opacity:0.12; animation:float 6s ease-in-out infinite; }
    @keyframes float{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-18px) } }
    main{ position:relative; z-index:10; padding-top:84px; }
    .container{ max-width:1200px; margin:0 auto; padding:24px; }
    /* hero */
    .hero{ display:flex; gap:28px; align-items:center; justify-content:space-between; padding:32px 0; flex-wrap:wrap; }
    .hero-left{ flex:1 1 420px; min-width:260px; }
    .hero-title{ font-size:34px; line-height:1.06; font-weight:900; margin-bottom:10px; background:linear-gradient(90deg,#fff,var(--gg-grad-mid),var(--gg-grad-start)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .hero-sub{ color:rgba(255,255,255,0.86); font-size:16px; margin-bottom:18px; }
    .hero-ctas{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px; }
    .btn-primary{ padding:12px 20px; border-radius:999px; font-weight:900; text-decoration:none; color:#fff; background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); box-shadow:0 14px 36px rgba(155,93,229,0.12); }
    .btn-outline{ padding:10px 16px; border-radius:999px; text-decoration:none; color:rgba(255,255,255,0.92); border:1px solid rgba(255,255,255,0.06); font-weight:800; }
    .trust-row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .badge{ background:rgba(255,255,255,0.02); padding:8px 12px; border-radius:999px; font-weight:800; font-size:13px; display:flex; gap:8px; align-items:center; color:#fff; }
    .hero-right{ width:480px; max-width:48%; min-width:260px; display:flex; align-items:center; justify-content:center; }
    .hero-mock{ width:100%; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:16px; border:1px solid rgba(255,255,255,0.04); box-shadow:0 20px 60px rgba(0,0,0,0.4); }
    /* features */
    .features{ display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:20px; }
    .feature{ padding:16px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); }
    .feature h4{ font-size:16px; margin-bottom:8px; font-weight:900; }
    .feature p{ color:rgba(255,255,255,0.86); font-size:14px; }
    /* portable ad frame */
    .ad-example{ margin-top:30px; display:flex; gap:18px; align-items:flex-start; flex-wrap:wrap; }
    .ad-card{ width:420px; max-width:100%; background:linear-gradient(135deg,#0e1114,#101216); border-radius:14px; padding:12px; border:1px solid rgba(255,255,255,0.04); }
    .ad-top{ display:flex; align-items:center; gap:10px; margin-bottom:8px; }
    .ad-tag{ font-size:12px; color:rgba(255,255,255,0.78); background:rgba(255,255,255,0.02); padding:6px 8px; border-radius:8px; font-weight:800; }
    .ad-thumb{ width:92px; height:72px; border-radius:10px; background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:900; flex-shrink:0; }
    .ad-body{ flex:1; }
    .ad-title{ font-weight:900; font-size:15px; margin-bottom:6px; }
    .ad-meta{ color:rgba(255,255,255,0.72); font-size:13px; margin-bottom:8px; }
    .ad-reward{ font-weight:900; color:var(--gg-grad-mid); margin-left:auto; }
    .ad-timerbar{ margin-top:8px; height:10px; background:rgba(255,255,255,0.03); border-radius:999px; overflow:hidden; }
    .ad-progress{ height:100%; width:0%; background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); transition:width .25s linear; }
    .ad-controls{ display:flex; gap:8px; margin-top:10px; align-items:center; }
    .btn-small{ padding:8px 12px; border-radius:10px; font-weight:900; background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); color:#fff; border:none; cursor:pointer; }
    .btn-small.ghost{ background:transparent; border:1px solid rgba(255,255,255,0.06); color:#fff; }
    .ad-note{ font-size:13px; color:rgba(255,255,255,0.74); margin-top:8px; }
    /* how it works */
    .how{ display:flex; gap:12px; margin-top:36px; flex-wrap:wrap; }
    .step{ flex:1; min-width:220px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03); }
    .step h5{ font-size:15px; font-weight:900; margin-bottom:8px; }
    .step p{ color:rgba(255,255,255,0.86); }
    /* vip */
    .vip{ margin-top:28px; display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
    .plan{ padding:16px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); text-align:center; }
    .plan h4{ font-weight:900; margin-bottom:8px; }
    .plan p{ color:rgba(255,255,255,0.86); margin-bottom:12px; }
    /* games grid */
    .games{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-top:18px; }
    .game-card{ padding:12px; border-radius:10px; text-align:center; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03) }
    .game-locked{ opacity:0.36; filter:grayscale(0.5); }
    /* security & stats */
    .security{ display:flex; gap:12px; margin-top:20px; flex-wrap:wrap; }
    .stat{ padding:12px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); min-width:160px; text-align:center }
    .live-feed{ margin-top:12px; background:rgba(255,255,255,0.02); padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); height:80px; overflow:auto; font-size:13px; }
    /* hosted UI (unchanged logic) */
    #hostedAdRoot{ display:none; position:fixed; inset:0; z-index:2000; align-items:center; justify-content:center; background:rgba(4,6,8,0.82); padding:18px; }
    #hostedCard{ width:min(960px,96%); max-height:92vh; background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01)); padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); display:flex; flex-direction:column; overflow:hidden; }
    .ad-player-host{ width:100%; height:var(--ad-height,360px); border-radius:8px; overflow:hidden; background:#000; display:flex; align-items:center; justify-content:center; position:relative; }
    .controls-host{ margin-top:12px; display:flex; gap:8px; align-items:center; justify-content:center; }
    #claimBtnHosted{ padding:10px 14px; border-radius:10px; background:linear-gradient(45deg,var(--gg-grad-mid),var(--gg-grad-end)); border:none; color:#fff; cursor:pointer; font-weight:800; font-size:14px; opacity:0; transform:scale(0.98); }
    .hidden{ display:none !important; }
    /* circle ring */
    .circle-wrap{ width:88px; height:88px; display:flex; align-items:center; justify-content:center; position:relative; }
    .loader-spinner{ position:absolute; width:48px; height:48px; display:flex; align-items:center; justify-content:center; }
    .spinner-dot{ width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,0.9); opacity:0.12; animation:spinner 900ms linear infinite; }
    .spinner-dot:nth-child(2){ animation-delay:120ms; opacity:0.22 }
    .spinner-dot:nth-child(3){ animation-delay:240ms; opacity:0.32 }
    @keyframes spinner { 0%{ transform: translateY(-8px);}50%{ transform: translateY(0);}100%{ transform: translateY(-8px); } }
    .progress-ring{ width:88px; height:88px; transform:rotate(-90deg); }
    .ring-circle-bg{ stroke:rgba(255,255,255,0.06); stroke-width:8; fill:none; }
    .ring-circle{ stroke-linecap:round; stroke-width:8; fill:none; stroke:url(#ringGradient); }
    .circle-number{ position:absolute; font-weight:800; font-size:20px; color:#fff; }
    .circle-fadeout{ animation:circleOut 380ms ease forwards; }
    @keyframes circleOut{ to{ transform:scale(0.85); opacity:0; } }
    .btn-pop{ transform-origin:center; animation:popIn 420ms cubic-bezier(.2,.9,.3,1) forwards; }
    @keyframes popIn{ 0%{ transform:scale(0.6); opacity:0 } 60%{ transform:scale(1.08); opacity:1 } 100%{ transform:scale(1); } }
    .btn-pulse{ animation:pulse 900ms ease-in-out infinite; }
    @keyframes pulse{ 0%{ transform:translateY(0) } 50%{ transform:translateY(-4px) } 100%{ transform:translateY(0) } }
    footer{ margin-top:48px; padding:28px 0; background:rgba(6,8,10,0.6); border-top:1px solid rgba(255,255,255,0.02); }
    @media (max-width:1000px){ .features{ grid-template-columns:repeat(2,1fr); } .vip{ grid-template-columns:repeat(2,1fr); } .games{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:720px){ .nav{ padding:6px 12px; } .hero{ flex-direction:column-reverse; gap:18px; } .hero-right{ width:100%; } .features{ grid-template-columns:1fr; } .vip{ grid-template-columns:1fr; } .trust-row{ justify-content:flex-start; } .games{ grid-template-columns:repeat(2,1fr); } .slide-card{ right:8px; width:calc(100% - 32px); top:64px; } }
    /* consent banner */
    .consent-banner{ position:fixed; left:12px; right:12px; bottom:12px; z-index:1800; background:linear-gradient(180deg, #0b0d0f, #0f1317); border-radius:12px; padding:14px; display:flex; align-items:center; gap:12px; border:1px solid rgba(255,255,255,0.04); box-shadow:0 10px 40px rgba(0,0,0,0.6); }
    .consent-btn{ padding:10px 14px; border-radius:10px; font-weight:900; background:linear-gradient(90deg,var(--gg-grad-mid),var(--gg-grad-end)); color:#fff; border:none; cursor:pointer; }
    .consent-txt{ color:rgba(255,255,255,0.9); font-size:14px; flex:1; }
    /* content banner image */
    .content-banner{ margin-top:20px; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04); box-shadow:0 18px 60px rgba(0,0,0,0.45); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); }
    .banner-inner{ display:flex; gap:16px; align-items:center; padding:14px; flex-wrap:wrap; }
    .banner-img{ width:220px; max-width:100%; border-radius:8px; object-fit:cover; }
    .banner-body{ flex:1; }
  </style>
</head>

<body>
  <!-- Particles -->
  <div class="bg-particles" id="particles"></div>

  <!-- Header -->
  <header class="header">
    <div class="nav">
      <div class="logo-wrap">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEyGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTExLTAxPC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPjdhNjZiYmRiLTI0YzgtNGQxYy1iZTYxLTcxY2MyZGRmYWRkOTwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5VbnRpdGxlZCBkZXNpZ24gLSAxPC9yZGY6bGk+CiAgIDwvcmRmOkFsdD4KICA8L2RjOnRpdGxlPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlv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" alt="GainGrid logo" class="logo-img" />
        <div class="logo-text">Gain-Grid</div>
      </div>

      <div style="position:relative;">
        <div class="nav-links" id="topNav">
          <a class="nav-link" href="#home">Home</a>
          <a class="nav-link" href="#how">How</a>
          <a class="nav-link" href="#vip">VIP</a>
          <a class="nav-link" href="#games">Games</a>
          <a class="nav-cta" id="getStarted" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank" rel="noopener noreferrer">Get Started</a>
        </div>
        <div class="menu-btn" id="menuBtn" title="Menu" aria-label="Open menu">
          <!-- hamburger -->
          <svg width="18" height="12" viewBox="0 0 24 16" fill="none"><rect x="0" y="1" width="24" height="2" rx="1" fill="white" opacity="0.9"/><rect x="0" y="7" width="24" height="2" rx="1" fill="white" opacity="0.9"/><rect x="0" y="13" width="24" height="2" rx="1" fill="white" opacity="0.9"/></svg>
        </div>

        <div class="slide-card" id="slideCard" role="menu" aria-hidden="true">
          <a href="#home">Home</a>
          <a href="#how">How it works</a>
          <a href="#vip">VIP</a>
          <a href="#games">Games</a>
          <a href="https://t.me/SwanyTech" target="_blank" rel="noopener noreferrer">Contact</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main public landing (id kept publicLanding so deeplink flow can hide it) -->
  <main id="publicLanding">
    <div class="container">

      <!-- HERO -->
      <section class="hero" id="home">
        <div class="hero-left">
          <div class="hero-title">Watch. Earn. Grow ‚Äî with Gain-Grid</div>
          <div class="hero-sub">Verified timers, secure payouts and fun games ‚Äî built for real users and real advertisers.</div>

          <div class="hero-ctas">
            <a class="btn-primary" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank" rel="noopener noreferrer">Get Started</a>
            <a class="btn-outline" href="#how">How it works</a>
          </div>

          <div class="trust-row">
            <div class="badge">‚òÖ Trusted by 15K+ users</div>
            <div class="badge">‚≠ê 4.8 rating</div>
            <div class="badge">‚è± Verified timers</div>
          </div>

          <!-- small live stats -->
          <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;">
            <div class="stat"><div style="font-weight:900;font-size:20px" id="totalUsers">15,238</div><div style="font-size:12px;color:rgba(255,255,255,0.7)">Total users</div></div>
            <div class="stat"><div style="font-weight:900;font-size:20px" id="totalAds">239,102</div><div style="font-size:12px;color:rgba(255,255,255,0.7)">Ads viewed</div></div>
            <div class="stat"><div style="font-weight:900;font-size:20px" id="liveViewers">1,024</div><div style="font-size:12px;color:rgba(255,255,255,0.7)">Active now</div></div>
          </div>

        </div>

        <div class="hero-right">
          <div class="hero-mock" role="img" aria-label="GainGrid preview">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;">
              <div style="font-weight:900;background:linear-gradient(90deg,var(--gg-grad-start),var(--gg-grad-mid)); -webkit-background-clip:text;-webkit-text-fill-color:transparent;">GainGrid Dashboard</div>
              <div style="font-size:12px;color:rgba(255,255,255,0.7)">Live preview</div>
            </div>
            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
              <div style="background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;">
                <div style="font-size:12px;color:var(--gg-grad-mid);font-weight:800;margin-bottom:8px">Balance</div>
                <div style="font-weight:900;font-size:20px">1,247 GC</div>
              </div>
              <div style="background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;">
                <div style="font-size:12px;color:#12c2e9;font-weight:800;margin-bottom:8px">USD Value</div>
                <div style="font-weight:900;font-size:20px">$24.50</div>
              </div>
            </div>
            <div style="margin-top:12px; display:flex; gap:10px; align-items:center;">
              <a class="btn-outline" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank" rel="noopener noreferrer">Open Bot</a>
              <a class="btn-primary" href="https://t.me/SwanyTech" target="_blank" rel="noopener noreferrer">Contact</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Content banner: your provided dashboard screenshot -->
      <section class="content-banner" aria-label="Dashboard screenshot banner" style="margin-top:18px">
        <div class="banner-inner">
          <img class="banner-img" src="https://files.catbox.moe/sbwnxj.jpg" alt="GainGrid dashboard screenshot" />
          <div class="banner-body">
            <h3 style="font-size:20px;margin-bottom:8px">GainGrid ‚Äî Your dashboard preview</h3>
            <p style="color:rgba(255,255,255,0.86)">This preview shows how the bot dashboard appears to users. It demonstrates task lists, ad details, timers, and earnings. When users finish verified ads, the public live feed below updates automatically.</p>
            <div style="margin-top:10px;display:flex;gap:8px">
              <a class="btn-primary" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank">Try Watch Ads</a>
              <a class="btn-outline" href="#how">Learn how</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Features -->
      <section class="features" aria-labelledby="featuresHeading">
        <div class="feature">
          <h4>Verified timers</h4>
          <p>Securely confirm watch time before rewards are released to ensure advertisers get real engagement and users are paid fairly.</p>
        </div>
        <div class="feature">
          <h4>Fraud resistant</h4>
          <p>IP and email verification, plus backend checks, prevent fraud and protect payouts.</p>
        </div>
        <div class="feature">
          <h4>Fast payouts</h4>
          <p>Verified rewards are credited quickly. Withdraw to USD, BTC, USDT and more.</p>
        </div>
      </section>

      <!-- Example ad mockup (portable) -->
      <section class="ad-example" aria-labelledby="adExampleHeading">
        <div class="ad-card" role="group" aria-label="Ad example">
          <div class="ad-top">
            <div class="ad-tag">Ad ‚Ä¢ Sponsored</div>
            <div style="flex:1"></div>
            <div class="ad-reward" aria-hidden="true" style="font-size:13px">Reward: <span style="color:var(--gg-grad-mid)">1000 G-Coins</span></div>
          </div>

          <div style="display:flex;gap:12px;align-items:center;">
            <div class="ad-thumb" aria-hidden="true">IMG</div>
            <div class="ad-body">
              <div class="ad-title">Big Launch ‚Äî Watch 40s</div>
              <div class="ad-meta">Sample ad used for demonstration ‚Äî reward granted after verification.</div>

              <div style="margin-top:8px">
                <div class="ad-timerbar" aria-hidden="true">
                  <div id="exampleProgress" class="ad-progress" style="width:0%"></div>
                </div>
                <div style="display:flex;justify-content:space-between;margin-top:6px;font-size:13px;color:rgba(255,255,255,0.7);">
                  <div id="timeLeftExample">0s</div>
                  <div>40s</div>
                </div>
              </div>

              <div class="ad-controls">
                <button id="startExample" class="btn-small" aria-label="Start example ad">Start</button>
                <button id="skipExample" class="btn-small ghost" aria-label="Skip example ad">Skip</button>
              </div>

              <div class="ad-note">Once the timer completes, the reward is verified and credited to your wallet.</div>
            </div>
          </div>
        </div>

        <div style="flex:1; min-width:240px;">
          <h3 style="font-size:18px;margin-bottom:8px">How it works</h3>
          <ol style="color:rgba(255,255,255,0.86);line-height:1.6;padding-left:18px">
            <li><strong>Start</strong> ‚Äî Open an ad task and start the verified timer.</li>
            <li><strong>Verify</strong> ‚Äî GainGrid validates watch time and confirms the result.</li>
            <li><strong>Reward</strong> ‚Äî Verified rewards are credited to your wallet quickly.</li>
          </ol>
        </div>
      </section>

      <!-- How / Security / Stats -->
      <section class="how" id="how">
        <div class="step">
          <h5>Start</h5>
          <p>Tap Start to begin a verified watch ‚Äî a secure timer runs while you watch the ad.</p>
        </div>
        <div class="step">
          <h5>Verify</h5>
          <p>GainGrid validates watch time using multiple checks ‚Äî including IP and email verification for withdrawals.</p>
        </div>
        <div class="step">
          <h5>Reward</h5>
          <p>Once verified, rewards appear in your wallet. Gold & Premium users can trade G-Coins for strategic growth or promote ads to other users.</p>
        </div>
      </section>

      <!-- VIP plans -->
      <section id="vip" class="vip">
        <div class="plan">
          <h4>Basic (ü•â)</h4>
          <p>Starter level ‚Äî basic tasks and ads. Refer 6 users to promote to Basic VIP automatically.</p>
          <p style="font-weight:900;margin-top:8px">Good for new users</p>
          <a class="btn-outline" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank">Join Now</a>
        </div>
        <div class="plan">
          <h4>Gold (ü•á)</h4>
          <p>Higher G-Coin bonuses and access to G-Coin trading. Unlock extra games and daily promos.</p>
          <p style="font-weight:900;margin-top:8px">Higher earnings</p>
          <a class="btn-primary" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank">Upgrade</a>
        </div>
        <div class="plan">
          <h4>Premium (üèÜ)</h4>
          <p>Top rewards, exclusive tasks and fastest payouts. Trade G-Coins, promote ads, and get priority support.</p>
          <p style="font-weight:900;margin-top:8px">For heavy earners</p>
          <a class="btn-primary" href="https://t.me/GridGain_bot?start=watch_ads" target="_blank">Become VIP</a>
        </div>
      </section>

      <!-- Games (8 slots) -->
      <section id="games" style="margin-top:18px">
        <h3 style="margin-bottom:10px">Games (unlock by VIP level)</h3>
        <div class="games" aria-label="Games grid">
          <div class="game-card">Game 1<br><small>Unlocked</small></div>
          <div class="game-card">Game 2<br><small>Unlocked</small></div>
          <div class="game-card game-locked">Game 3<br><small>Locked</small></div>
          <div class="game-card game-locked">Game 4<br><small>Locked</small></div>
          <div class="game-card game-locked">Game 5<br><small>Locked</small></div>
          <div class="game-card game-locked">Game 6<br><small>Locked</small></div>
          <div class="game-card game-locked">Game 7<br><small>Locked</small></div>
          <div class="game-card game-locked">Game 8<br><small>Locked</small></div>
        </div>
      </section>

      <!-- Security & live feed -->
      <section style="margin-top:20px">
        <div class="security">
          <div class="stat">
            <div style="font-weight:900" id="ipVerCount">IP Checks</div>
            <div style="font-size:12px;color:rgba(255,255,255,0.7)">Active monitoring</div>
          </div>
          <div class="stat">
            <div style="font-weight:900" id="emailVerCount">Email Verified</div>
            <div style="font-size:12px;color:rgba(255,255,255,0.7)">Withdrawals secured</div>
          </div>
          <div class="stat">
            <div style="font-weight:900" id="promotionsCount">Promotions</div>
            <div style="font-size:12px;color:rgba(255,255,255,0.7)">Active campaigns</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div style="font-weight:900">Live activity</div>
            <div style="font-size:12px;color:rgba(255,255,255,0.7)">Updated in real time</div>
          </div>
          <div class="live-feed" id="liveFeed" aria-live="polite">
            <!-- live entries appended here -->
            <div>@alice completed ad GG_12345 ‚Äî +5 GC</div>
            <div>@mike completed ad GG_12346 ‚Äî +5 GC</div>
          </div>
        </div>
      </section>

    </div>
  </main>

  <!-- Consent banner (blocks public ad injection until accept) -->
  <div class="consent-banner" id="consentBanner" role="dialog" aria-live="polite" aria-label="Cookie and ad consent">
    <div class="consent-txt">GainGrid uses ads to reward users. By consenting, you allow ad scripts to load on this page for a better experience. You can still use the bot without accepting.</div>
    <button class="consent-btn" id="consentAccept">Accept & Show Ads</button>
    <button class="consent-btn" id="consentDecline" style="background:transparent;border:1px solid rgba(255,255,255,0.06);">Decline</button>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
      <div>
        <div style="font-weight:900">Gain-Grid</div>
        <div style="color:rgba(255,255,255,0.7);font-size:13px">Secure ad verification ‚Ä¢ Fast payouts ‚Ä¢ Telegram-integrated</div>
      </div>

      <div style="display:flex;gap:12px;align-items:center;">
        <a class="nav-link" href="/privacy.html">Privacy</a>
        <a class="nav-link" href="/terms.html">Terms</a>
        <a class="nav-link" href="https://t.me/SwanyTech" target="_blank" rel="noopener noreferrer">Contact</a>
      </div>

      <div style="width:100%;text-align:center;margin-top:12px;color:rgba(255,255,255,0.6)">¬© GainGrid 2025. All rights reserved.</div>
    </div>
  </footer>

  <!-- Hidden hosted/deeplink ad UI (unchanged logic) -->
  <div id="hostedAdRoot" aria-hidden="true">
    <div id="hostedCard" role="dialog" aria-modal="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <div style="font-weight:900;font-size:18px;background:linear-gradient(90deg,var(--gg-grad-mid),var(--gg-grad-start));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Gain-Grid</div>
        <div style="font-size:13px;color:rgba(255,255,255,0.9)" id="vipInfoHosted">VIP: ‚Äî</div>
      </div>

      <div class="ad-player-host" id="adPlayerHosted" aria-live="polite">
        <div id="adPlaceholderHosted" style="color:rgba(255,255,255,0.7)">Ad player area</div>

        <div id="circleContainer" style="position:absolute;right:18px;top:18px;display:none;z-index:60;">
          <div class="circle-wrap" id="circleWrap" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <svg class="progress-ring" viewBox="0 0 88 88" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#9b5de5"/>
                  <stop offset="50%" stop-color="#f15bb5"/>
                  <stop offset="100%" stop-color="#ff6f61"/>
                </linearGradient>
              </defs>
              <circle class="ring-circle-bg" cx="44" cy="44" r="36"></circle>
              <circle class="ring-circle" cx="44" cy="44" r="36" stroke-dasharray="226.194" stroke-dashoffset="226.194"></circle>
            </svg>

            <div class="loader-spinner hidden" id="loaderSpinner" aria-hidden="true">
              <div class="spinner-dot"></div>
              <div class="spinner-dot"></div>
              <div class="spinner-dot"></div>
            </div>

            <div class="circle-number" id="circleNumber">‚Äî</div>
          </div>
        </div>

        <div class="progress-text" id="progressTextHosted" style="display:none">Loading‚Ä¶</div>
      </div>

      <div class="controls-host" id="controlsHosted" style="margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:center;">
        <div class="countdown" id="countdownHosted">‚Äî</div>
        <button id="claimBtnHosted" class="btn-pop" disabled>Claim / Send Result</button>
      </div>

      <div class="note" id="noteHosted" style="margin-top:8px;color:rgba(255,255,255,0.6);font-size:12px;text-align:center;">Waiting for deeplink...</div>
    </div>
  </div>

  <div id="dbg" style="display:none">dbg</div>

  <!-- App JS: preserves all crucial names/endpoints/logic and adds public features -->
<script>
/* === preserved configuration (unchanged endpoints / names) === */
const BOT_WEBHOOK = "https://gaingrid.bots.business/api/webhook/2072999/loadweb"
const HOSTED_SESSION_KEY = 'gg_hosted_authoritative_payload';
const ADSTER_SCRIPT_KEY = 'a8702b8b4c48420a3815542007f1c0df';
const ADSTER_SCRIPT_SRC = "//www.highperformanceformat.com/" + ADSTER_SCRIPT_KEY + "/invoke.js";
const CUSTOM_PROVIDER_URL = "https://experiencedbat.com/dbm/F.zudZGMN/vBZ_GeUM/Jelm/9ruAZ/UjlGkpPiTuYT2/ORDok/w/NEjDU-t/Ntj/Y/4_OhTuAb2iNQixZWs/aKWn1rpydHDr0IxU";

/* optional: bot username fallback used for deeplink fallback */
const FALLBACK_BOT_USERNAME = "GridGain_bot";

const el = id => { try{ return document.getElementById(id); }catch(e){ return null; } };
function dbg(msg){ try{ const d = el('dbg'); if(d){ d.style.display='block'; d.textContent=String(msg).slice(0,200); } console.log(msg); }catch(e){} }
function nowISO(){ return (new Date()).toISOString(); }
function randChoice(arr){ return arr && arr.length ? arr[Math.floor(Math.random()*arr.length)] : 30; }
function safeParse(s){ try{ return JSON.parse(s); }catch(e){ return null; } }

function simpleHashToInt(s){
  try{
    const str = String(s||'');
    let h = 2166136261;
    for(let i=0;i<str.length;i++){ h ^= str.charCodeAt(i); h += (h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24); }
    return Math.abs(h);
  }catch(e){ return Math.floor(Math.random()*1000000); }
}

function decodeBase64UrlSafe(raw){
  if(!raw) return null;
  try{
    let r = raw.replace(/\s+/g,'').replace(/-/g,'+').replace(/_/g,'/');
    const pad = r.length % 4;
    if(pad === 2) r += '=='; else if(pad === 3) r += '=';
    const dec = atob(r);
    try{ return JSON.parse(dec);}catch(e){ return dec; }
  }catch(e){ return null; }
}
function tryDecodePayloadString(raw){
  if(!raw) return null;
  try{
    if((raw.indexOf('%7B')===0 || raw.indexOf('%5B')===0) || raw.indexOf('%22') !== -1){
      try { return JSON.parse(decodeURIComponent(raw)); } catch(e){}
    }
    if(raw[0] === '{' || raw[0] === '['){
      try { return JSON.parse(raw); } catch(e){}
    }
    const maybe = decodeBase64UrlSafe(raw);
    if(maybe) return maybe;
    try{ return JSON.parse(decodeURIComponent(raw)); }catch(e){}
  }catch(e){}
  return null;
}

/* ----- ad provider injection (kept) ----- */
async function injectAdsense(holder){
  try{
    if(!holder) return false;
    // if user hasn't consented, don't inject
    if(!window.__gg_ads_consent) return false;
    holder.innerHTML = '';
    const ins = document.createElement('ins');
    ins.className = 'adsbygoogle';
    ins.style.display = 'block';
    ins.style.width = '100%';
    ins.style.height = '100%';
    ins.setAttribute('data-ad-client', 'ca-pub-2309008538670900');
    ins.setAttribute('data-ad-slot', '4194843603');
    holder.appendChild(ins);
    try{ (adsbygoogle = window.adsbygoogle || []).push({}); }catch(e){}
    return true;
  }catch(e){ return false; }
}
function injectCustomProvider(holder){
  try{
    if(!holder) return false;
    holder.innerHTML = '';
    const ifr = document.createElement('iframe');
    ifr.src = CUSTOM_PROVIDER_URL;
    ifr.style.border = '0';
    ifr.style.width = '100%';
    ifr.style.height = '100%';
    ifr.setAttribute('referrerpolicy','no-referrer');
    holder.appendChild(ifr);
    return true;
  }catch(e){ return false; }
}
function injectAdsterra(holder){
  try{
    if(!holder) return false;
    holder.innerHTML = '';
    const wrap = document.createElement('div');
    wrap.style.width = '100%'; wrap.style.height='100%'; wrap.style.display='flex'; wrap.style.alignItems='center'; wrap.style.justifyContent='center';
    holder.appendChild(wrap);
    const s1 = document.createElement('script'); s1.type='text/javascript';
    s1.text = "atOptions = { 'key' : '" + ADSTER_SCRIPT_KEY + "', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} };";
    const s2 = document.createElement('script'); s2.type='text/javascript'; s2.src = ADSTER_SCRIPT_SRC;
    wrap.appendChild(s1); wrap.appendChild(s2);
    return true;
  }catch(e){ return false; }
}
function showFallbackVideo(holder){
  try{
    if(!holder) return false;
    holder.innerHTML = '';
    const v = document.createElement('video');
    v.src = "https://storage.googleapis.com/interactive-media-ads/media/big_buck_bunny_trailer.mp4";
    v.autoplay = true; v.muted = true; v.playsInline = true; v.controls = false;
    v.style.width = '100%'; v.style.height = '100%';
    holder.appendChild(v);
    try{ v.play().catch(()=>{}); }catch(e){}
    return true;
  }catch(e){ return false; }
}

// compute secs mapping (kept and improved mapping)
function computeSecs(authoritativePayload){
  try{
    if(authoritativePayload && authoritativePayload.secs && !isNaN(Number(authoritativePayload.secs))){
      return Number(authoritativePayload.secs);
    }
    if(authoritativePayload && authoritativePayload.secs_min && authoritativePayload.secs_max){
      const min = Number(authoritativePayload.secs_min) || 0;
      const max = Number(authoritativePayload.secs_max) || min;
      if(max <= min) return min;
      if(authoritativePayload.user && (authoritativePayload.user.user_id || authoritativePayload.user_id)){
        const uid = (authoritativePayload.user.user_id || authoritativePayload.user_id);
        const h = simpleHashToInt(uid);
        return min + (h % (max - min + 1));
      }
      return Math.floor(Math.random()*(max-min+1)) + min;
    }
    if(authoritativePayload && Array.isArray(authoritativePayload.secs_list) && authoritativePayload.secs_list.length){
      if(authoritativePayload.user && (authoritativePayload.user.user_id || authoritativePayload.user_id)){
        const uid = (authoritativePayload.user.user_id || authoritativePayload.user_id);
        const h = simpleHashToInt(uid);
        return authoritativePayload.secs_list[h % authoritativePayload.secs_list.length];
      }
      return randChoice(authoritativePayload.secs_list);
    }
    const DURS = [30,40,50,60];
    if(authoritativePayload && authoritativePayload.user && (authoritativePayload.user.user_id || authoritativePayload.user_id)){
      const uid = (authoritativePayload.user.user_id || authoritativePayload.user_id);
      const h = simpleHashToInt(uid);
      return DURS[h % DURS.length];
    }
    return randChoice([30,40,50,60]);
  }catch(e){
    return 30;
  }
}

// ring helpers for hosted UI
const ringRadius = 36;
const ringCirc = 2 * Math.PI * ringRadius;
function setRingProgress(percent){
  try{
    const ring = document.querySelector('#hostedCard .ring-circle');
    if(!ring) return;
    const pct = Math.max(0, Math.min(100, Number(percent) || 0));
    const offset = Math.round(ringCirc * (1 - (pct/100)));
    try{ ring.setAttribute('stroke-dasharray', String(ringCirc)); ring.setAttribute('stroke-dashoffset', String(offset)); }catch(e){}
    const wrap = el('circleWrap'); if(wrap && typeof wrap.setAttribute === 'function') wrap.setAttribute('aria-valuenow', String(Math.round(pct)));
  }catch(e){}
}

/* ---------- hosted state (preserved) ---------- */
let countdownTimer = null;
let sessionActive = false;
let sessionCompleted = false;
let sessionPayload = null;

function showHostedUI(){
  try{ const root = el('hostedAdRoot'); if(root){ root.style.display='flex'; root.setAttribute('aria-hidden','false'); } const circleContainer = el('circleContainer'); if(circleContainer) circleContainer.style.display='block'; const controls = el('controlsHosted'); if(controls) controls.style.display='flex'; const note = el('noteHosted'); if(note) note.textContent = 'Deeplink payload received ‚Äî preparing...'; }catch(e){}
}
function hideHostedUI(){ try{ const root = el('hostedAdRoot'); if(root){ root.style.display='none'; root.setAttribute('aria-hidden','true'); } }catch(e){} }
function showCircle(){ try{ const c = el('circleContainer'); if(c) c.style.display='block'; const spinner = el('loaderSpinner'); if(spinner) spinner.classList.remove('hidden'); const p = el('progressTextHosted'); if(p) p.style.display='block'; }catch(e){} }
function hideCircle(){ try{ const cw = el('circleWrap'); if(cw && cw.classList) cw.classList.add('circle-fadeout'); setTimeout(()=>{ try{ const c = el('circleContainer'); if(c) c.style.display='none'; if(cw && cw.classList) cw.classList.remove('circle-fadeout'); }catch(e){} },420); const pt = el('progressTextHosted'); if(pt) pt.style.display='none'; }catch(e){} }
function showClaimButton(){ try{ const btn = el('claimBtnHosted'); if(!btn) return; btn.disabled=false; if(!btn.classList.contains('btn-pop')) btn.classList.add('btn-pop'); if(!btn.classList.contains('btn-pulse')) btn.classList.add('btn-pulse'); btn.style.opacity='1'; btn.style.transform='scale(1)'; btn.scrollIntoView({behavior:'smooth', block:'center'}); }catch(e){} }
function hideClaimButton(){ try{ const btn = el('claimBtnHosted'); if(btn){ btn.disabled=true; btn.style.opacity='0'; if(btn.classList.contains('btn-pulse')) btn.classList.remove('btn-pulse'); } }catch(e){} }

/* ========== EDITED: Deeplink helpers & send functions (kept & improved) ========== */

/* NEW: URL-safe base64 helper (added) */
function toBase64UrlSafe(obj) {
  try {
    const json = (typeof obj === 'string') ? obj : JSON.stringify(obj);
    const b64 = btoa(unescape(encodeURIComponent(json)));
    return b64.replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
  } catch (e) {
    dbg('toBase64UrlSafe error: ' + e);
    return '';
  }
}

function getBotUsernameFromQs(){
  try{
    const qp = (function(){
      const s = location.search.replace(/^\?/,''); if(!s) return {};
      return s.split('&').filter(Boolean).map(p=>{
        const i = p.indexOf('=');
        if(i<0) return [decodeURIComponent(p),''];
        return [decodeURIComponent(p.slice(0,i)), decodeURIComponent(p.slice(i+1))];
      }).reduce((o,[k,v])=>{ o[k]=v; return o; }, {});
    })();
    return qp.bot_username || qp.bot || FALLBACK_BOT_USERNAME;
  }catch(e){ return FALLBACK_BOT_USERNAME; }
}

/* builds deeplink for /start=loadweb<base64> ‚Äî matches your /start processing
   REPLACED: now uses URL-safe base64 and consistent 'loadweb' prefix */
function buildLoadwebDeeplink(payloadObj){
  try{
    const botUser = getBotUsernameFromQs();
    const safe = toBase64UrlSafe(payloadObj);
    if(!safe) return null;
    const startParam = 'loadweb' + safe;
    const deeplink = "https://t.me/" + encodeURIComponent(botUser) + "?start=" + encodeURIComponent(startParam);
    return deeplink;
  }catch(e){ dbg('buildLoadwebDeeplink err: ' + e); return null; }
}

/* helper: fetch with timeout using AbortController */
function fetchWithTimeout(url, opts = {}, timeout = 5000){
  return new Promise((resolve, reject) => {
    try {
      const controller = new AbortController();
      const id = setTimeout(() => { controller.abort(); }, timeout);
      fetch(url, Object.assign({}, opts, { signal: controller.signal }))
        .then(res => { clearTimeout(id); resolve(res); })
        .catch(err => { clearTimeout(id); reject(err); });
    } catch (e) { reject(e); }
  });
}

/* sendToBotInternal tries webhook first (beacon/fetch), then WebApp.sendData redundancy,
   then deeplink as a last resort. Returns object describing the result. */
async function sendToBotInternal(action, payload){
  const data = { action: action, payload: payload || {}, meta: { from_hosted: true, ts: Date.now(), host: location.href } };

  // Try navigator.sendBeacon to BOT_WEBHOOK first (fire-and-forget)
  try {
    if (navigator && typeof navigator.sendBeacon === 'function') {
      try {
        const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
        const ok = navigator.sendBeacon(BOT_WEBHOOK, blob);
        if (ok) {
          dbg('sendToBotInternal: posted to BOT_WEBHOOK via sendBeacon');
          return { ok: true, via: 'bot_webhook_beacon' };
        } else {
          dbg('sendToBotInternal: sendBeacon returned false');
        }
      } catch (e) { dbg('sendToBotInternal: sendBeacon err: ' + e); }
    }
  } catch(e){ dbg('sendToBotInternal beacon check err: ' + e); }

  // Try fetch to BOT_WEBHOOK with timeout
  try {
    try {
      const res = await fetchWithTimeout(BOT_WEBHOOK, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data), keepalive: true, mode: 'cors' }, 6000);
      if (res && (res.status >= 200 && res.status < 300)) {
        dbg('sendToBotInternal: posted to BOT_WEBHOOK via fetch');
        return { ok: true, via: 'bot_webhook_fetch' };
      } else {
        dbg('sendToBotInternal: BOT_WEBHOOK fetch responded: ' + (res && res.status));
      }
    } catch (e) {
      dbg('sendToBotInternal: BOT_WEBHOOK fetch failed: ' + e);
    }
  } catch(e){ dbg('sendToBotInternal webhook attempt err: ' + e); }

  // Try webhook candidates from querystring (if any)
  try {
    const qp = (function(){
      const s = location.search.replace(/^\?/,''); if(!s) return {};
      return s.split('&').filter(Boolean).map(p=>{
        const i = p.indexOf('=');
        if(i<0) return [decodeURIComponent(p),''];
        return [decodeURIComponent(p.slice(0,i)), decodeURIComponent(p.slice(i+1))];
      }).reduce((o,[k,v])=>{ o[k]=v; return o; }, {});
    })();

    const cand = [];
    if(qp.webhook) cand.push(qp.webhook);
    if(qp.callback) cand.push(qp.callback);
    if(qp.hook) cand.push(qp.hook);
    if(qp.url) cand.push(qp.url);
    if(qp.url && qp.url.includes('?')){
      try { const tmp = new URL(qp.url); const w = tmp.searchParams.get('webhook'); if(w) cand.push(w); } catch(e){}
    }
    const list = Array.from(new Set(cand.filter(Boolean)));
    for(const wh of list){
      try {
        const res = await fetchWithTimeout(wh, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify(data), keepalive: true, mode:'cors' }, 5000);
        if(res && res.ok){ dbg('sendToBotInternal: sent via webhook candidate ' + wh); return { ok:true, via:'webhook_candidate', url: wh }; }
      } catch(e){ dbg('sendToBotInternal webhook candidate fail: ' + e); }
    }
  } catch(e){ dbg('sendToBotInternal webhook candidates err: ' + e); }

  // If webhook attempts failed, try Telegram.WebApp.sendData (redundant)
  try {
    if (window.Telegram && Telegram.WebApp && typeof Telegram.WebApp.sendData === 'function') {
      try {
        Telegram.WebApp.sendData(JSON.stringify(data));
        dbg('sendToBotInternal: sent via WebApp.sendData (fallback)');
        return { ok: true, via: 'webapp_sendData' };
      } catch (e) { dbg('sendToBotInternal: WebApp.sendData failed: ' + e); }
    }
  } catch(e){ dbg('sendToBotInternal webapp check err: ' + e); }

  // As last resort: build deeplink and open it (user will be taken to Telegram and /start will fire)
  try {
    const deeplink = buildLoadwebDeeplink(data);
    if (deeplink) {
      dbg('sendToBotInternal: fallback to deeplink: ' + deeplink);
      try {
        // open deeplink in top context if possible
        if (window.top && window.top.location && window.top !== window) {
          window.top.location.href = deeplink;
        } else {
          // try an anchor click + window.open best-effort (avoid immediate reload of our page in same tab)
          const a = document.createElement('a');
          a.href = deeplink;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.style.display = 'none';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          try { window.open(deeplink, '_blank'); } catch (_) {}
        }
        return { ok: false, via: 'deeplink', url: deeplink };
      } catch(e){ dbg('sendToBotInternal deeplink open failed: ' + e); }
    }
  } catch(e){ dbg('sendToBotInternal deeplink err: ' + e); }

  // Final fallback: copy to clipboard or console
  try {
    const txt = JSON.stringify(data);
    if (navigator && navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
      await navigator.clipboard.writeText(txt);
      dbg('sendToBotInternal: payload copied to clipboard');
      return { ok: false, via: 'clipboard' };
    } else {
      dbg('sendToBotInternal: no clipboard available, logging payload');
      console.log('payload for bot:', data);
      return { ok: false, via: 'console' };
    }
  } catch (e) {
    dbg('sendToBotInternal: final fallback failed: ' + e);
    return { ok: false, error: e };
  }
}

/* sendToWebhook keeps previous wrapper but left mostly unchanged - still available as backup */
function sendToWebhook(data){
  return new Promise(async (resolve) => {
    try {
      const wrapper = { action: 'ads_validate', payload: data, meta: { ts: Date.now(), host: location.href } };
      const body = JSON.stringify(wrapper);

      // 1) Try WebApp.sendData (redundant)
      try {
        if(window.Telegram && Telegram.WebApp && typeof Telegram.WebApp.sendData === 'function') {
          try {
            Telegram.WebApp.sendData(body);
            dbg('sent via WebApp.sendData');
            const note = el('noteHosted'); if(note) note.textContent = 'Result posted to bot (WebApp.sendData).';
            resolve(true);
            return;
          } catch(e) { dbg('WebApp.sendData err: ' + e); }
        }
      } catch(e){}

      // 2) navigator.sendBeacon
      try {
        if(navigator.sendBeacon) {
          try {
            const blob = new Blob([body], { type: 'application/json' });
            const s = navigator.sendBeacon(BOT_WEBHOOK, blob);
            if(s) { dbg('webhook sent via beacon'); const note=el('noteHosted'); if(note) note.textContent='Result posted to webhook (beacon).'; resolve(true); return; }
          } catch(be){ dbg('beacon err'); }
        }
      } catch(e){}

      // 3) fetch to BOT_WEBHOOK
      try {
        const resp = await fetchWithTimeout(BOT_WEBHOOK, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: body, keepalive:true, mode:'cors' }, 6000);
        if(resp && (resp.status>=200 && resp.status<300)) {
          dbg('webhook posted via fetch');
          const note = el('noteHosted'); if(note) note.textContent = 'Result posted to webhook.';
          resolve(true);
          return;
        } else {
          dbg('webhook fetch responded: ' + (resp && resp.status));
        }
      } catch(e){ dbg('webhook fetch err: ' + e); }

      // 4) try webhook candidates in querystring
      try {
        const qp = (function(){
          const q = {};
          (location.search.replace(/^\?/, '') || '').split('&').filter(Boolean).forEach(p=>{ const i=p.indexOf('='); if(i<0) q[decodeURIComponent(p)]=''; else q[decodeURIComponent(p.slice(0,i))]=decodeURIComponent(p.slice(i+1)); });
          return q;
        })();
        const cand = qp.webhook || qp.callback || qp.hook || qp.url;
        if(cand) {
          try {
            const r = await fetchWithTimeout(cand, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: body, keepalive:true, mode:'cors' }, 5000);
            if(r && r.ok) { dbg('webhook posted to candidate'); const note = el('noteHosted'); if(note) note.textContent='Result posted to fallback webhook.'; resolve(true); return; }
          } catch(e){ dbg('candidate webhook err'); }
        }
      } catch(e){}

      // 5) FALLBACK: build deeplink for /start=loadweb<base64> and redirect (if all else failed)
      try {
        const deeplink = buildLoadwebDeeplink(data);
        if(deeplink){
          try { window.location.href = deeplink; } catch(e){ try { window.open(deeplink, "_blank"); }catch(_){ } }
          const note = el('noteHosted'); if(note) note.textContent = 'Opened Telegram deeplink to send result (fallback).';
          resolve(false);
          return;
        }
      } catch(e){ dbg('deeplink fallback err: ' + e); }

      const note = el('noteHosted'); if(note) note.textContent = 'Failed to post result to bot.';
      resolve(false);
    } catch(err) {
      dbg('sendToWebhook outer err: ' + err);
      const note = el('noteHosted'); if(note) note.textContent = 'Failed to post result (error).';
      resolve(false);
    }
  });
}

/* ========== EDITED: Claim button handler now does WEBHOOK first, then WebApp, then DEEPLINK fallback ========== */
/* Changes here: we await send attempts and only open deeplink if webhook/webapp failed */
function requestCloseHost(){
  try{
    try{ if(window.Telegram && Telegram.WebApp && typeof Telegram.WebApp.close === 'function'){ Telegram.WebApp.close(); return; } }catch(e){}
    try{ parent.postMessage({ type: 'close_hosted' }, '*'); }catch(e){}
    try{ window.close(); }catch(e){}
    setTimeout(()=>{ try{ parent.postMessage({ type: 'close_hosted' }, '*'); }catch(e){} try{ window.close(); }catch(e){} }, 250);
  }catch(e){}
}
/* ========== END EDITED ========== */

 // mark skipped if user leaves early
function finalizeAsSkippedIfActive(reason){
  try{
    if(!sessionActive || sessionCompleted) return;
    sessionActive=false; sessionCompleted=false;
    const ad_id = sessionPayload && (sessionPayload.ad_id || sessionPayload.id) ? (sessionPayload.ad_id || sessionPayload.id) : ('host_ad_' + Date.now());
    const reward = sessionPayload && (sessionPayload.reward || sessionPayload.base) ? (sessionPayload.reward || sessionPayload.base) : 0;
    // NOTE: status 'ad_skiped' (as requested) kept
    const result = { ad_id, reward, base: sessionPayload && sessionPayload.base||0, vip_level: sessionPayload && (sessionPayload.vip_level||sessionPayload.vip)||null, user: sessionPayload && (sessionPayload.user||sessionPayload.user_id)||null, status:'ad_skiped', reason: reason||'user_navigated_or_closed', ts: nowISO(), original_payload: sessionPayload||null };
    // attempt to send via best available channel (prefer WebApp or webhook candidates)
    (async ()=>{
      try {
        const r = await sendToBotInternal('ad_skiped', result);
        dbg('skip sendToBotInternal result: ' + JSON.stringify(r));
        // also post to BOT_WEBHOOK as a guaranteed store
        try { await sendToWebhook(result); } catch(e){}
      } catch(e){ dbg('finalizeAsSkippedIfActive send err'); }
    })();
    // also update public live feed
    try{ appendLiveFeed(`System: ${ad_id} marked skipped (${reason || 'n/a'})`); }catch(e){}
  }catch(e){}
}

/* === ADDED: verification bridge (fires when session starts) === */
function verifyHostedSession(){
  try {
    if (!sessionPayload || !sessionPayload.user || !sessionPayload.user.user_id) {
      dbg('No sessionPayload or user found for verification.');
      return;
    }
    const data = {
      action: "validate_session",
      ad_id: sessionPayload.ad_id || sessionPayload.id,
      reward: sessionPayload.reward || 0,
      vip_level: sessionPayload.vip_level || sessionPayload.vip || null,
      user: sessionPayload.user,
      ts: nowISO(),
      status: sessionCompleted ? "completed" : (sessionActive ? "active" : "pending"),
      from_hosted: true
    };
    // prefer webhook first
    sendToBotInternal('validate_session', data).then((r)=>dbg('Verification sent to bot: ' + JSON.stringify(r))).catch(()=>dbg('Verification failed'));
  } catch (err) {
    dbg('verifyHostedSession error: ' + err);
  }
}
/* === END ADDED === */

// start countdown (kept logic)
function startCountdownAndReport(authoritativePayload, source = 'deeplink'){
  try{
    if(!authoritativePayload || typeof authoritativePayload !== 'object') return;
    try{ sessionStorage.setItem(HOSTED_SESSION_KEY, JSON.stringify(authoritativePayload)); }catch(e){}
    sessionActive=true; sessionCompleted=false; sessionPayload=authoritativePayload;

    // === ADDED: notify verification bridge that session started ===
    try{ document.dispatchEvent(new Event("gg_session_started")); }catch(e){ dbg('dispatch gg_session_started err'); }
    // also wire local listener so hosted page can auto-verify on start
    document.addEventListener("gg_session_started", verifyHostedSession, { once:true });

    const secs = Number(computeSecs(authoritativePayload)) || 30;
    const ad_id = authoritativePayload.ad_id || authoritativePayload.id || ('host_ad_' + Date.now());
    const reward = authoritativePayload.reward || authoritativePayload.r || authoritativePayload.base || 0;

    showHostedUI();
    el('noteHosted').textContent = `Ad: ${ad_id} ‚Äî preparing ${secs}s`;
    hideClaimButton();

    (async ()=>{
      const holder = el('adPlayerHosted') || el('adPlaceholderHosted');
      let ok = false;
      try { ok = await injectAdsense(holder); } catch(e) { ok = false; }
      if(!ok) ok = injectCustomProvider(holder);
      if(!ok) ok = injectAdsterra(holder);
      if(!ok) showFallbackVideo(holder);
    })();

    showCircle();
    const spinner = el('loaderSpinner'); if(spinner) spinner.classList.remove('hidden');
    const circleNumber = el('circleNumber'); if(circleNumber) circleNumber.textContent = '';
    setRingProgress(0);
    const ptext = el('progressTextHosted'); if(ptext) ptext.textContent='Loading‚Ä¶';

    try{ if(countdownTimer) clearInterval(countdownTimer); countdownTimer = null; }catch(e){}

    setTimeout(()=>{
      try{
        if(spinner) spinner.classList.add('hidden');
        let remaining = secs;
        if(circleNumber) circleNumber.textContent = String(remaining);
        setRingProgress(0);
        if(ptext) ptext.textContent = `0 / ${secs}s`;

        const startTs = Date.now();
        countdownTimer = setInterval(()=>{
          try{
            const elapsed = Math.floor((Date.now() - startTs)/1000);
            const pct = Math.min(100, Math.round((elapsed / secs) * 100));
            setRingProgress(pct);
            if(ptext) ptext.textContent = `${elapsed} / ${secs}s`;
            const newRemaining = Math.max(0, secs - elapsed);
            if(circleNumber) circleNumber.textContent = String(newRemaining);
            const cd = el('countdownHosted'); if(cd) cd.textContent = String(newRemaining);

            if(newRemaining <= 0){
              try{ clearInterval(countdownTimer); countdownTimer = null; }catch(e){}
              sessionCompleted=true; sessionActive=false;
              el('noteHosted').textContent = 'Countdown finished ‚Äî result posted to webhook.';
              const result = { ad_id, reward, base: authoritativePayload.base||0, vip_level: authoritativePayload.vip_level||authoritativePayload.vip||null, user: authoritativePayload.user||authoritativePayload.user_id||null, status:'completed', ts: nowISO(), original_payload: authoritativePayload };

              // send automatically via best available method (we try webhook first, then webapp, then deeplink)
              (async ()=>{
                try {
                  const r = await sendToBotInternal('ads_validate', result);
                  dbg('auto-complete sendToBotInternal result: ' + JSON.stringify(r));
                  // still post to BOT_WEBHOOK for audit / redundancy if initial attempt used webapp or deeplink
                  try{ await sendToWebhook(result); }catch(e){}
                } catch(e){
                  dbg('auto-complete post failed: ' + e);
                }
              })();

              hideCircle();
              setTimeout(()=>{ showClaimButton(); el('noteHosted').textContent = 'Tap Claim to confirm and close.'; appendLiveFeed(`@${(result.user && result.user.user_id) || 'user'}: completed ${ad_id}`); updateCountersOnComplete(result); }, 320);
            }
          }catch(inner){ console.warn(inner); }
        }, 250);
      }catch(e){ console.warn(e); dbg('count errors'); }
    }, 700);

    try{
      const btn = el('claimBtnHosted');
      if(btn){
        btn.onclick = function(){
          (async ()=>{
            try{
              if(btn.disabled) return;
              btn.disabled = true;
              if(btn.classList.contains('btn-pulse')) btn.classList.remove('btn-pulse');

              // mark completed if not already
              sessionCompleted=true; sessionActive=false;
              const result = { ad_id, reward, base: authoritativePayload.base||0, vip_level: authoritativePayload.vip_level||authoritativePayload.vip||null, user: authoritativePayload.user||authoritativePayload.user_id||null, status:'claimed_manual', ts: nowISO(), original_payload: authoritativePayload };

              // 1) Try webhook/WebApp first (sendToBotInternal prioritizes webhook)
              try {
                const r = await sendToBotInternal('ads_validate', result);
                dbg('claim sendToBotInternal result: ' + JSON.stringify(r));
                // If webhook succeeded or webapp sendData used, we can close
                if(r && r.ok && (r.via === 'bot_webhook_fetch' || r.via === 'bot_webhook_beacon' || r.via === 'webapp_sendData' || r.via === 'bot_webhook')) {
                  try{ el('noteHosted') && (el('noteHosted').textContent = 'Result posted to webhook. Closing...'); }catch(e){}
                  setTimeout(()=>{ try{ requestCloseHost(); }catch(e){} }, 600);
                  // also try to store audit copy
                  try{ await sendToWebhook(result); }catch(e){ dbg('audit sendToWebhook failed: ' + e); }
                  return;
                }
              } catch(e){ dbg('claim sendToBotInternal threw: ' + e); }

              // 2) If webhook/webapp failed or indicated deeplink fallback, open deeplink
              try {
                const deeplink = buildLoadwebDeeplink(result);
                if(deeplink){
                  try {
                    // open in new tab if possible (avoid replacing hosted page)
                    const a = document.createElement('a');
                    a.href = deeplink;
                    a.target = '_blank';
                    a.rel = 'noopener noreferrer';
                    a.style.display = 'none';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    try { window.open(deeplink, '_blank'); } catch(_) {}
                    dbg('Claim: opened deeplink fallback to send payload');
                  } catch(e){
                    try{ window.location.href = deeplink; }catch(err){}
                    dbg('Claim: deeplink fallback direct navigation attempted');
                  }
                  // Give a short pause then close hosted view
                  setTimeout(()=>{ try{ requestCloseHost(); }catch(e){} }, 800);
                  return;
                }
              } catch(e){ dbg('claim deeplink build/launch err: ' + e); }

              // 3) Final fallback: try direct sendToWebhook as best-effort and close
              try {
                await sendToWebhook(result);
              } catch(e){ dbg('final fallback sendToWebhook failed: ' + e); }
              try{ requestCloseHost(); }catch(e){}
            }catch(e){ console.warn(e); dbg('claim onclick outer err: ' + e); }
          })();
        };
      }
    }catch(e){}
  }catch(e){ console.warn(e); dbg('start err'); }
}

/* update counters and live feed helpers */
function appendLiveFeed(text){
  try{
    const feed = el('liveFeed');
    if(!feed) return;
    const div = document.createElement('div');
    div.textContent = text;
    feed.insertBefore(div, feed.firstChild);
    // keep only last 80 entries
    while(feed.children.length > 80) feed.removeChild(feed.lastChild);
  }catch(e){}
}
function updateCountersOnComplete(result){
  try{
    // increment totals shown on public landing
    const totalAdsEl = el('totalAds');
    const liveViewEl = el('liveViewers');
    if(totalAdsEl) totalAdsEl.textContent = String(Number(totalAdsEl.textContent || 0) + 1);
    if(liveViewEl) {
      const cur = Math.max(0, Number(liveViewEl.textContent || 0) - 0);
      liveViewEl.textContent = String(cur);
    }
  }catch(e){}
}

// lifecycle events for skip detection
window.addEventListener('beforeunload', ()=>{ try{ finalizeAsSkippedIfActive('beforeunload'); }catch(e){} });
window.addEventListener('pagehide', ()=>{ try{ finalizeAsSkippedIfActive('pagehide'); }catch(e){} });
document.addEventListener('visibilitychange', ()=>{ try{ if(document.visibilityState==='hidden'){ setTimeout(()=>{ if(document.visibilityState==='hidden') finalizeAsSkippedIfActive('visibility_hidden'); },1200); } }catch(e){} });

// postMessage handler - preserved plus extra messages for live feed
window.addEventListener('message', function(ev){
  try{
    const d = ev.data || {};
    if(!d || typeof d !== 'object') return;
    if(d.type === 'start_payload' && d.payload){
      const payload = d.payload;
      let obj = null;
      if(typeof payload === 'string') obj = tryDecodePayloadString(payload); else obj = payload;
      if(obj && typeof obj === 'object'){ el('noteHosted').textContent = 'PostMessage payload received.'; startCountdownAndReport(obj,'postmessage'); }
      return;
    }
    // new: accept 'ad_completed' messages to update public UI counters and feed
    if(d.type === 'ad_completed' && d.payload){
      // payload might contain { user: { user_id }, ad_id, reward }
      const p = d.payload;
      const who = (p.user && (p.user.user_id || p.user)) || 'user';
      appendLiveFeed(`@${who}: completed ${p.ad_id || 'ad'} ‚Äî +${p.reward||0} GC`);
      updateCountersOnComplete(p);
      return;
    }
    if(d.type === 'close_hosted'){ try{ window.close(); }catch(e){} return; }
  }catch(e){}
}, false);

// getQueryParams (kept)
function getQueryParams(){
  const s = location.search.replace(/^\?/,''); if(!s) return {};
  return s.split('&').filter(Boolean).map(p=>{ const i=p.indexOf('='); if(i<0) return [decodeURIComponent(p),'']; return [decodeURIComponent(p.slice(0,i)), decodeURIComponent(p.slice(i+1))]; }).reduce((o,[k,v])=>{ o[k]=v; return o; }, {});
}

// boot: preserve deeplink behavior (start param, hash)
function boot(){
  try{
    const qp = getQueryParams();
    if(qp.start){
      const decoded = tryDecodePayloadString(qp.start);
      if(decoded && typeof decoded === 'object'){
        el('publicLanding') && (el('publicLanding').style.display = 'none');
        showHostedUI();
        startCountdownAndReport(decoded);
        return;
      }
    }
    const hraw = (location.hash || '').replace(/^#/,'');
    if(hraw){
      if(hraw.startsWith('/')){
        const parts = hraw.split('?'); const path = parts[0].replace(/^\//,'');
        const hashQP = {};
        if(parts[1]) parts[1].split('&').forEach(p=>{ const i=p.indexOf('='); if(i>=0) hashQP[decodeURIComponent(p.slice(0,i))]=decodeURIComponent(p.slice(i+1)); else hashQP[decodeURIComponent(p)]=''; });
        if(path === 'ad' && (hashQP.ad_id || hashQP.id || hashQP.start)){
          if(hashQP.start){
            const dec = tryDecodePayloadString(hashQP.start);
            if(dec && typeof dec === 'object'){ el('publicLanding') && (el('publicLanding').style.display='none'); showHostedUI(); startCountdownAndReport(dec); return; }
          }
          const payload = { ad_id: hashQP.ad_id || hashQP.id, secs: hashQP.secs || hashQP.duration, reward: hashQP.reward || hashQP.base, user: { user_id: hashQP.user_id || hashQP.uid || null } };
          el('publicLanding') && (el('publicLanding').style.display='none');
          showHostedUI();
          startCountdownAndReport(payload);
          return;
        }
      } else {
        const decoded = tryDecodePayloadString(decodeURIComponent(hraw));
        if(decoded && typeof decoded === 'object'){ el('publicLanding') && (el('publicLanding').style.display='none'); showHostedUI(); startCountdownAndReport(decoded); return; }
      }
    }
    // public mode
    hideHostedUI();
  }catch(e){ console.warn(e); dbg('boot err'); }
}

/* === Public UI behaviors & helpers (new) === */
(function publicInit(){
  // particles
  function createParticles(){
    const container = document.getElementById('particles');
    if(!container) return;
    const count = 36;
    for(let i=0;i<count;i++){
      const p = document.createElement('div');
      p.className='particle';
      p.style.left = (Math.random()*100)+'%';
      p.style.top = (Math.random()*100)+'%';
      p.style.opacity = 0.06 + Math.random()*0.18;
      p.style.animationDelay = (Math.random()*6)+'s';
      p.style.width = (4 + Math.random()*6)+'px';
      p.style.height = p.style.width;
      container.appendChild(p);
    }
  }

  // menu toggle
  try{
    const menuBtn = document.getElementById('menuBtn');
    const slideCard = document.getElementById('slideCard');
    menuBtn && menuBtn.addEventListener('click', ()=>{ if(slideCard.style.display === 'block'){ slideCard.style.display = 'none'; slideCard.setAttribute('aria-hidden','true'); } else { slideCard.style.display = 'block'; slideCard.setAttribute('aria-hidden','false'); } });
    document.addEventListener('click', (e)=>{ if(menuBtn && slideCard && !menuBtn.contains(e.target) && !slideCard.contains(e.target)) { slideCard.style.display='none'; slideCard.setAttribute('aria-hidden','true'); } });
  }catch(e){}

  // sample ad mock controls (public only)
  (function adExampleControls(){
    const startBtn = document.getElementById('startExample');
    const skipBtn = document.getElementById('skipExample');
    const progress = document.getElementById('exampleProgress');
    const timeLeft = document.getElementById('timeLeftExample');
    let interval = null;
    let total = 40;
    let elapsed = 0;
    function reset(){ elapsed = 0; if(interval) clearInterval(interval); if(progress) progress.style.width = '0%'; if(timeLeft) timeLeft.textContent = '0s'; }
    reset();
    startBtn && startBtn.addEventListener('click', function(){
      reset();
      interval = setInterval(function(){
        elapsed++;
        const pct = Math.min(100, Math.round((elapsed/total)*100));
        if(progress) progress.style.width = pct + '%';
        if(timeLeft) timeLeft.textContent = elapsed + 's';
        if(elapsed >= total){
          clearInterval(interval);
          if(timeLeft) timeLeft.textContent = total + 's';
          alert('Example complete ‚Äî reward would be verified and added to your wallet.');
        }
      }, 1000);
    });
    skipBtn && skipBtn.addEventListener('click', function(){ if(interval) clearInterval(interval); reset(); });
  })();

  // smooth scroll anchors
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', function(e){
      const target = document.querySelector(this.getAttribute('href'));
      if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });

  // wire contact link
  if(document.getElementById('contactLink')) document.getElementById('contactLink').href = 'https://t.me/SwanyTech';

  createParticles();
})();

// consent banner handling: public ad injection blocked until accepted
(function consentHandling(){
  const banner = el('consentBanner');
  const accept = el('consentAccept');
  const decline = el('consentDecline');
  window.__gg_ads_consent = false;
  accept && accept.addEventListener('click', ()=>{
    window.__gg_ads_consent = true;
    try{ banner.style.display = 'none'; }catch(e){}
    // optionally inject public ad slots now (if any)
  });
  decline && decline.addEventListener('click', ()=>{
    window.__gg_ads_consent = false;
    try{ banner.style.display = 'none'; }catch(e){}
  });
})();

// run boot on DOM ready
if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', boot);
else boot();
</script>

<!-- Cloudflare helper iframe snippet preserved (kept) -->
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997477bb430563ca',t:'MTc2MTkyNzUwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();<script>
(function() {
  const tg = window.Telegram?.WebApp;
  tg?.expand(); // Make sure the web app uses full height inside Telegram

  // Extract "start" payload (from Telegram deep link or bot start_param)
  function getStartPayload() {
    const hash = window.location.hash || "";
    const match = hash.match(/start=(.+)/);
    if (!match) return null;
    try {
      return JSON.parse(atob(match[1]));
    } catch (e) {
      console.error("‚ùå Invalid start payload:", e);
      return null;
    }
  }

  const payload = getStartPayload();
  if (!payload) {
    console.warn("‚ö†Ô∏è No valid payload found in URL");
    return;
  }

  // Function to send result data to bot
  function sendDataToBot(finalData) {
    const webhookUrl = `https://gaingrid.bots.business/api/webhook/2072999/loadweb`;

    fetch(webhookUrl, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(finalData)
    })
    .then(res => {
      if (!res.ok) throw new Error("Webhook failed");
      console.log("‚úÖ Data sent to bot via webhook");
    })
    .catch(err => {
      console.warn("‚ö†Ô∏è Webhook failed, using deeplink fallback:", err);
      const encoded = btoa(JSON.stringify(finalData));
      const botLink = `https://t.me/GainGridBot?start=${encoded}`;
      window.location.href = botLink;
    });
  }

  // Example: after ad watch countdown completes
  // You can hook this to your real "ad completed" event
  document.addEventListener("DOMContentLoaded", () => {
    // Replace with your own ad-complete trigger logic
    setTimeout(() => {
      const resultData = {
        action: "ad_complete",
        ad_id: payload.ad_id,
        user: payload.user,
        reward: payload.reward,
        vip_level: payload.vip_level,
        status: "completed",
        timestamp: Date.now()
      };
      sendDataToBot(resultData);
    }, 5000); // simulate 5 seconds, replace with your ad timer
  });
})();
</script>
</body>
</html>
